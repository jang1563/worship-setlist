# WorshipFlow PRD (Product Requirements Document)

## 프로젝트 개요

### 프로젝트명
**WorshipFlow** (가칭: 찬양설계)

### 한 줄 정의
> "예배 맥락을 대화로 말하면 AI가 찬양 흐름을 설계하고, 곡 전환까지 가이드해주는 한국 교회 특화 오픈소스 도구"

### 핵심 가치
1. **AI 대화형 설계**: 곡 선정 + 순서 배치가 대화 한 번으로 해결
2. **한국 교회 특화**: 한국 CCM, 찬송가, 번안곡 매핑 완벽 지원
3. **무료/오픈소스**: Planning Center 대비 비용 장벽 제거
4. **준비 → 연습 → 실행**: 예배 전 과정을 하나의 플로우로

### 타겟 사용자
- 워십 리더 / 찬양 인도자
- 찬양팀 멤버
- 소규모 교회 (비용 부담으로 유료 서비스 사용 어려운)
- 한국 CCM 중심 예배를 드리는 교회

---

## 경쟁 분석

| 서비스 | 강점 | 약점 | 가격 |
|--------|------|------|------|
| Planning Center | 팀 협업, 스케줄링 | AI 없음, 한국어 미지원 | $14-99/월 |
| WorshipTools | 클라우드 싱크, 차트 | AI 없음 | 유료 |
| OnSong | 모바일 최적화, 페달 연동 | iOS 중심 | $9.99+ |
| FreeShow (오픈소스) | 무료, 가사 검색 | 송리스트 생성 없음 | 무료 |
| OpenLP (오픈소스) | 크로스플랫폼 | 송리스트 생성 없음 | 무료 |

### WorshipFlow 차별점
- ✅ AI 대화형 송리스트 생성 (핵심 혁신)
- ✅ 한국 CCM 전문 DB + 번안곡 매핑
- ✅ 키 전환 자동 분석 + 브릿지 가이드
- ✅ 무료 오픈소스
- ✅ 준비 → 연습 → 실행 통합

---

## 개발 로드맵

```
Phase 1: MVP (4주)          Phase 2: 코드 & 악보 (3주)
┌────────────────────┐      ┌────────────────────┐
│ • AI 송리스트 생성  │      │ • AI 코드 추출      │
│ • 찬양 DB (100곡)   │  →   │ • 커뮤니티 코드 입력 │
│ • 키 전환 체크      │      │ • 코드차트 편집기    │
│ • 전환 가이드       │      │ • PPT 내보내기      │
└────────────────────┘      └────────────────────┘
           │                           │
           v                           v
Phase 3: 연습 도구 (3주)    Phase 4: 실시간 예배 (3주)
┌────────────────────┐      ┌────────────────────┐
│ • 유튜브 MR 플레이어│      │ • 가사 프로젝터     │
│ • 속도/구간 조절    │  →   │ • 인도자 대시보드   │
│ • 코드 동기화       │      │ • 스테이지 모니터   │
│ • MIDI 가이드      │      │ • 듀얼 모니터       │
└────────────────────┘      └────────────────────┘
           │                           │
           └───────────┬───────────────┘
                       v
            Phase 5: 공유 & 커뮤니티 (3주)
            ┌────────────────────┐
            │ • 인증 시스템       │
            │ • 팀 기능          │
            │ • 클라우드 배포     │
            │ • 오픈소스 공개     │
            └────────────────────┘
```

---

## Phase 1: MVP 기능 상세

### 1.1 AI 대화형 송리스트 생성 (핵심)

**사용자 시나리오:**
```
사용자: "이번 주일 청년예배 25분, 설교 본문은 로마서 8장이고 
        주제는 '성령의 인도하심'이야"

AI: 추천 송리스트를 구성했습니다:

1. 주 안에서 행복 (Key: G, 4:30) - 시작/감사
   └ 로마서 8:1 "그러므로 이제 그리스도 예수 안에 있는 자에게는..."
   
2. 성령이여 오소서 (Key: A, 5:00) - 경배/간구
   └ 전환: G → A (피아노 2마디 브릿지)
   
3. 하나님의 세계 (Key: D, 4:30) - 선포
   └ 전환: A → D (직접 전환, 자연스러움)
   
4. 주의 사랑이 나를 놓지 않네 (Key: G, 5:30) - 고백/응답
   └ 전환: D → G (sus4 → 해결)

총 예상 시간: 23분
키 흐름: G → A → D → G (자연스러움 ✓)
```

**입력 파라미터:**
- 예배 유형 (주일예배, 새벽예배, 청년예배, 수련회 등)
- 설교 본문/주제
- 예상 시간
- 팀 구성 (악기, 보컬)
- 분위기 요청 (잔잔하게, 역동적으로 등)
- 제외할 곡 (최근 부른 곡 자동 제외 옵션)

**출력:**
- 추천 송리스트 (곡명, 키, BPM, 예상 시간)
- 각 곡의 역할 설명 (시작, 경배, 고백, 선포 등)
- 관련 말씀 연결
- 키 전환 자연스러움 체크

### 1.2 찬양 DB (한국 특화)

**초기 데이터 (100곡):**
- 한국 CCM 50곡 (마커스, 제이어스, 어노인팅, 캠퍼스워십 등)
- 새찬송가 50곡 (주요 찬송)
- 번안곡 매핑 포함

### 1.3 예배 성격별 프리셋

| 예배 유형 | 시간 | 곡 수 | 분위기 | 특징 |
|----------|------|------|--------|------|
| 새벽예배 | 10-15분 | 2-3곡 | 잔잔, 묵상 | 피아노 단독 가능 |
| 주일예배 | 20-30분 | 4-6곡 | 다양 | 세대 다양성 고려 |
| 수요예배 | 15-20분 | 3-4곡 | 말씀 중심 | 절제된 구성 |
| 청년예배 | 25-35분 | 5-7곡 | 에너지→깊은 경배 | 최신 CCM |
| 수련회 | 30-45분 | 6-10곡 | 고조→절정→회복 | 반복, 떼창 |
| 기도회 | 유동적 | 2-4곡 | 배경 음악 | 단순, 반복 |

### 1.4 키 전환 자동 체크

**키 호환성 매트릭스:**
```
자연스러움: 같은 키, ±2반음, 4도/5도 관계
괜찮음: ±3반음, 상대 장/단조
어색함: ±4반음 이상, 트라이톤 관계
```

### 1.5 곡 전환 가이드

**전환 유형:**
- 직접 전환 (같은 키 또는 근접 키)
- 피벗 코드 (공통 코드로 연결)
- 악기별 브릿지 (피아노 아르페지오, 기타 픽킹 등)

**출력 예시:**
```
[G → A 전환 가이드]
방법 1 (직접): G 마지막 코드에서 A로 직접 이동
방법 2 (피벗): G → D/F# → E/G# → A (반음 상행)
방법 3 (브릿지): 피아노 4마디 - G | Gsus4 | A/G | A
```

---

## 제약사항

### 저작권 준수
| 허용 | 불가 |
|------|------|
| 메타데이터 (제목, 키, BPM) | 악보 이미지 호스팅 |
| 커뮤니티 코드차트 | 음원/MR 직접 제공 |
| 외부 링크 제공 | 가사 전문 저장 |
| 유튜브 임베드 | 음원 다운로드 |

### 기술적 제약
- 코드 추출 정확도 한계 (70-85%)
- 유튜브 API 일일 할당량
- LLM API 비용

---

## 성공 지표

| Phase | 목표 |
|-------|------|
| MVP | 송리스트 생성 1,000회, 피드백 100건 |
| Phase 2-3 | 코드차트 DB 500곡, 활성 사용자 100명 |
| Phase 4-5 | 팀 등록 50개, 커뮤니티 기여 200건 |

---

## 핵심 안내 문구

앱 전반에 표시:
> "이 추천은 참고용입니다. 예배의 최종 결정은 성령의 인도하심과 인도자의 분별을 통해 이루어집니다."
